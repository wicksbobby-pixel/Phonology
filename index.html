<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Phoneme Explorer — GA (Full Build)</title>
<style>
  :root { --bg:#f7f7fb; --card:#fff; --ink:#111; --muted:#6b7280; --line:#e5e7eb; --accent:#111; }
  body { margin:0; font-family: system-ui, sans-serif; background:var(--bg); color:var(--ink); }
  header { position:sticky; top:0; background:#fff; border-bottom:1px solid var(--line); padding:12px; display:flex; justify-content:space-between; align-items:center; }
  .chip { display:inline-block; padding:4px 8px; border:1px solid var(--line); border-radius:999px; margin:2px; cursor:pointer; }
  .chip.active { background:var(--accent); color:#fff; }
  .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(40px,1fr)); gap:6px; margin:12px 0; }
  .tile { display:flex; align-items:center; justify-content:center; padding:8px; background:#fff; border:1px solid var(--line); border-radius:8px; font-size:20px; cursor:pointer; }
  .tile.active { background:var(--accent); color:#fff; }
  .panel { background:#fff; border:1px solid var(--line); border-radius:12px; padding:12px; margin-top:16px; }
  .badge { font-size:12px; padding:2px 6px; border-radius:6px; background:#eee; margin:2px; display:inline-block; }
</style>
</head>
<body>
<header>
  <div><b>Phoneme Explorer — GA</b> <span id="systemBadge">System: Davenport</span></div>
  <div>
    <button id="toggleSystem">Toggle SPE ↔ Davenport</button>
    <button id="clearSelectionBtn">Clear Selection</button>
  </div>
</header>
<main style="padding:12px; max-width:1000px; margin:auto;">
  <div id="filters"></div>
  <h3>Consonants</h3>
  <div id="gridConsonants" class="grid"></div>
  <h3>Vowels</h3>
  <div id="gridVowels" class="grid"></div>
  <div class="panel">
    <h3>Details</h3>
    <div id="detailsContent">Select phonemes to view features, shared classes, and differences.</div>
  </div>
</main>
<script>
const PHONEMES=[
  {ipa:'p',type:'consonant',features:{Davenport:{manner:'Stop',place:'Labial',voicing:'Voiceless'},SPE_1968:{lab:'+',voice:'-'}}},
  {ipa:'b',type:'consonant',features:{Davenport:{manner:'Stop',place:'Labial',voicing:'Voiced'},SPE_1968:{lab:'+',voice:'+'}}},
  {ipa:'t',type:'consonant',features:{Davenport:{manner:'Stop',place:'Coronal',voicing:'Voiceless'},SPE_1968:{cor:'+',ant:'+'}}},
  {ipa:'d',type:'consonant',features:{Davenport:{manner:'Stop',place:'Coronal',voicing:'Voiced'},SPE_1968:{cor:'+',ant:'+',voice:'+'}}},
  {ipa:'s',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiceless',sibilance:'Sibilant'},SPE_1968:{cor:'+',strid:'+'}}},
  {ipa:'z',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiced',sibilance:'Sibilant'},SPE_1968:{cor:'+',strid:'+',voice:'+'}}},
  {ipa:'ʃ',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiceless',sibilance:'Sibilant',anteriority:'Postalveolar'},SPE_1968:{cor:'+',ant:'-',strid:'+'}}},
  {ipa:'ʒ',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiced',sibilance:'Sibilant',anteriority:'Postalveolar'},SPE_1968:{cor:'+',ant:'-',strid:'+',voice:'+'}}},
  {ipa:'m',type:'consonant',features:{Davenport:{manner:'Nasal',place:'Labial',voicing:'Voiced'},SPE_1968:{nas:'+'}}},
  {ipa:'n',type:'consonant',features:{Davenport:{manner:'Nasal',place:'Coronal',voicing:'Voiced'},SPE_1968:{nas:'+',cor:'+'}}},
  {ipa:'l',type:'consonant',features:{Davenport:{manner:'Lateral',place:'Coronal',voicing:'Voiced'},SPE_1968:{lat:'+'}}},
  {ipa:'ɹ',type:'consonant',features:{Davenport:{manner:'Rhotic',place:'Coronal',voicing:'Voiced'},SPE_1968:{cor:'+',dist:'+'}}},
  {ipa:'w',type:'consonant',flags:{is_glide:true},features:{Davenport:{manner:'Glide',place:'Labial+Dorsal',voicing:'Voiced'},SPE_1968:{round:'+'}}},
  {ipa:'j',type:'consonant',flags:{is_glide:true},features:{Davenport:{manner:'Glide',place:'Dorsal',voicing:'Voiced'},SPE_1968:{}}},
  {ipa:'i',type:'vowel',features:{Davenport:{height:'High',backness:'Front',tenseness:'Tense'},SPE_1968:{high:'+',back:'-'}}},
  {ipa:'ɪ',type:'vowel',features:{Davenport:{height:'High',backness:'Front',tenseness:'Lax'},SPE_1968:{high:'+',back:'-',tense:'-'}}},
  {ipa:'ɛ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Front',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'æ',type:'vowel',features:{Davenport:{height:'Low',backness:'Front',tenseness:'Lax'},SPE_1968:{low:'+'}}},
  {ipa:'ə',type:'vowel',features:{Davenport:{height:'Mid',backness:'Central',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'ʌ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Central',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'u',type:'vowel',features:{Davenport:{height:'High',backness:'Back',tenseness:'Tense',rounding:'Rounded'},SPE_1968:{back:'+',high:'+'}}},
  {ipa:'ʊ',type:'vowel',features:{Davenport:{height:'High',backness:'Back',tenseness:'Lax',rounding:'Rounded'},SPE_1968:{}}},
  {ipa:'o',type:'vowel',features:{Davenport:{height:'Mid',backness:'Back',tenseness:'Tense',rounding:'Rounded'},SPE_1968:{}}},
  {ipa:'ɔ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Back',tenseness:'Lax',rounding:'Rounded'},SPE_1968:{tense:'-'}}},
  {ipa:'ɑ',type:'vowel',features:{Davenport:{height:'Low',backness:'Back',tenseness:'Tense'},SPE_1968:{low:'+'}}}
];
let system="Davenport";let selected=[];
function renderGrids(){const gc=document.getElementById("gridConsonants");gc.innerHTML="";const gv=document.getElementById("gridVowels");gv.innerHTML="";for(const p of PHONEMES){const btn=document.createElement("div");btn.className="tile";btn.textContent=p.ipa;if(selected.includes(p))btn.classList.add("active");btn.onclick=()=>{if(selected.includes(p))selected=selected.filter(x=>x!==p);else selected.push(p);renderDetails();renderGrids();};(p.type==='consonant'?gc:gv).appendChild(btn);}}
function renderDetails(){const el=document.getElementById("detailsContent");if(selected.length===0){el.textContent="Select phonemes";return;}if(selected.length===1){el.textContent=selected[0].ipa+"\n"+JSON.stringify(selected[0].features[system],null,2);}else if(selected.length===2){const[a,b]=selected;const A=a.features[system],B=b.features[system];let shared=[],diff=[];for(const k of new Set([...Object.keys(A),...Object.keys(B)])){if(A[k]===B[k])shared.push([k,A[k]]);else diff.push([k,A[k],B[k]]);}el.innerHTML="<b>"+a.ipa+" vs "+b.ipa+"</b><br><u>Shared</u><br>"+shared.map(x=>x.join(": ")).join("<br>")+"<br><u>Diff</u><br>"+diff.map(x=>x.join(" / ")).join("<br>");}else{el.textContent="Selected: "+selected.map(p=>p.ipa).join(", ");}}
function renderAll(){renderGrids();renderDetails();}
document.getElementById("toggleSystem").onclick=()=>{system=system==="Davenport"?"SPE_1968":"Davenport";document.getElementById("systemBadge").textContent="System: "+system;renderAll();};
document.getElementById("clearSelectionBtn").onclick=()=>{selected=[];renderAll();};
renderAll();
</script>
</body>
</html>