<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Phoneme Explorer — GA (Updated)</title>
<style>
  :root { --bg:#f7f7fb; --card:#fff; --ink:#111; --muted:#6b7280; --line:#e5e7eb; --accent:#111; }
  body { margin:0; font-family: system-ui, sans-serif; background:var(--bg); color:var(--ink); }
  header { position:sticky; top:0; background:#fff; border-bottom:1px solid var(--line); padding:12px; display:flex; justify-content:space-between; align-items:center; }
  main { display:grid; grid-template-columns: 250px 1fr; gap:16px; padding:16px; max-width:1300px; margin:auto; }
  .panel { background:#fff; border:1px solid var(--line); border-radius:12px; padding:12px; }
  .chip { display:inline-block; padding:4px 8px; border:1px solid var(--line); border-radius:999px; margin:2px; cursor:pointer; font-size:13px; }
  .chip.active { background:var(--accent); color:#fff; }
  .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(40px,1fr)); gap:6px; margin:12px 0; }
  .tile { display:flex; align-items:center; justify-content:center; padding:8px; background:#fff; border:1px solid var(--line); border-radius:8px; font-size:20px; cursor:pointer; }
  .tile.active { background:var(--accent); color:#fff; }
  pre { background:#f3f4f6; padding:8px; border-radius:8px; overflow:auto; }
  h3 { margin:8px 0; }
</style>
</head>
<body>
<header>
  <div><b>Phoneme Explorer — GA</b> <span id="systemBadge">System: Davenport</span></div>
  <div>
    <button id="toggleSystem">Toggle SPE ↔ Davenport</button>
    <button id="resetBtn">Reset Filters</button>
    <button id="clearSelectionBtn">Clear Selection</button>
  </div>
</header>
<main>
  <section class="panel">
    <h3>Filters</h3>
    <div id="filters"></div>
  </section>
  <section>
    <div class="panel">
      <h3>Consonants</h3>
      <div id="gridConsonants" class="grid"></div>
      <h3>Vowels</h3>
      <div id="gridVowels" class="grid"></div>
    </div>
    <div class="panel" style="margin-top:16px;">
      <h3>Details</h3>
      <div id="detailsContent">Select phonemes to view features, shared classes, and differences.</div>
    </div>
  </section>
</main>
<script>
// === Phoneme Inventory (GA) ===
const PHONEMES=[
  {ipa:'p',type:'consonant',features:{Davenport:{manner:'Stop',place:'Labial',voicing:'Voiceless'},SPE_1968:{lab:'+',voice:'-'}}},
  {ipa:'b',type:'consonant',features:{Davenport:{manner:'Stop',place:'Labial',voicing:'Voiced'},SPE_1968:{lab:'+',voice:'+'}}},
  {ipa:'t',type:'consonant',features:{Davenport:{manner:'Stop',place:'Coronal',voicing:'Voiceless'},SPE_1968:{cor:'+',ant:'+'}}},
  {ipa:'d',type:'consonant',features:{Davenport:{manner:'Stop',place:'Coronal',voicing:'Voiced'},SPE_1968:{cor:'+',ant:'+',voice:'+'}}},
  {ipa:'k',type:'consonant',features:{Davenport:{manner:'Stop',place:'Dorsal',voicing:'Voiceless'},SPE_1968:{dors:'+',voice:'-'}}},
  {ipa:'g',type:'consonant',features:{Davenport:{manner:'Stop',place:'Dorsal',voicing:'Voiced'},SPE_1968:{dors:'+',voice:'+'}}},
  {ipa:'s',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiceless',sibilance:'Sibilant',anteriority:'Anterior'},SPE_1968:{cor:'+',strid:'+',ant:'+'}}},
  {ipa:'z',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiced',sibilance:'Sibilant',anteriority:'Anterior'},SPE_1968:{cor:'+',strid:'+',ant:'+',voice:'+'}}},
  {ipa:'ʃ',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiceless',sibilance:'Sibilant',anteriority:'Postalveolar'},SPE_1968:{cor:'+',ant:'-',strid:'+'}}},
  {ipa:'ʒ',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiced',sibilance:'Sibilant',anteriority:'Postalveolar'},SPE_1968:{cor:'+',ant:'-',strid:'+',voice:'+'}}},
  {ipa:'θ',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiceless',sibilance:'Non-sibilant',anteriority:'Anterior'},SPE_1968:{cor:'+',ant:'+',strid:'-'}}},
  {ipa:'ð',type:'consonant',features:{Davenport:{manner:'Fricative',place:'Coronal',voicing:'Voiced',sibilance:'Non-sibilant',anteriority:'Anterior'},SPE_1968:{cor:'+',ant:'+',strid:'-',voice:'+'}}},
  {ipa:'m',type:'consonant',features:{Davenport:{manner:'Nasal',place:'Labial',voicing:'Voiced'},SPE_1968:{nas:'+'}}},
  {ipa:'n',type:'consonant',features:{Davenport:{manner:'Nasal',place:'Coronal',voicing:'Voiced'},SPE_1968:{nas:'+',cor:'+'}}},
  {ipa:'ŋ',type:'consonant',features:{Davenport:{manner:'Nasal',place:'Dorsal',voicing:'Voiced'},SPE_1968:{nas:'+',dors:'+'}}},
  {ipa:'l',type:'consonant',features:{Davenport:{manner:'Lateral',place:'Coronal',voicing:'Voiced'},SPE_1968:{lat:'+'}}},
  {ipa:'ɹ',type:'consonant',features:{Davenport:{manner:'Rhotic',place:'Coronal',voicing:'Voiced'},SPE_1968:{cor:'+',dist:'+'}}},
  {ipa:'w',type:'consonant',flags:{is_glide:true},features:{Davenport:{manner:'Glide',place:'Labial+Dorsal',voicing:'Voiced'},SPE_1968:{round:'+'}}},
  {ipa:'j',type:'consonant',flags:{is_glide:true},features:{Davenport:{manner:'Glide',place:'Dorsal',voicing:'Voiced'},SPE_1968:{}}},
  {ipa:'i',type:'vowel',features:{Davenport:{height:'High',backness:'Front',tenseness:'Tense'},SPE_1968:{high:'+',back:'-'}}},
  {ipa:'ɪ',type:'vowel',features:{Davenport:{height:'High',backness:'Front',tenseness:'Lax'},SPE_1968:{high:'+',back:'-',tense:'-'}}},
  {ipa:'ɛ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Front',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'æ',type:'vowel',features:{Davenport:{height:'Low',backness:'Front',tenseness:'Lax'},SPE_1968:{low:'+'}}},
  {ipa:'ə',type:'vowel',features:{Davenport:{height:'Mid',backness:'Central',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'ʌ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Central',tenseness:'Lax'},SPE_1968:{}}},
  {ipa:'u',type:'vowel',features:{Davenport:{height:'High',backness:'Back',tenseness:'Tense',rounding:'Rounded'},SPE_1968:{back:'+',high:'+'}}},
  {ipa:'ʊ',type:'vowel',features:{Davenport:{height:'High',backness:'Back',tenseness:'Lax',rounding:'Rounded'},SPE_1968:{}}},
  {ipa:'o',type:'vowel',features:{Davenport:{height:'Mid',backness:'Back',tenseness:'Tense',rounding:'Rounded'},SPE_1968:{}}},
  {ipa:'ɔ',type:'vowel',features:{Davenport:{height:'Mid',backness:'Back',tenseness:'Lax',rounding:'Rounded'},SPE_1968:{tense:'-'}}},
  {ipa:'ɑ',type:'vowel',features:{Davenport:{height:'Low',backness:'Back',tenseness:'Tense'},SPE_1968:{low:'+'}}}
];

// === Classes ===
const CLASSES={
  Davenport:{
    type:{Consonant:{kind:'consonant'},Vowel:{kind:'vowel'}},
    manner:{Stop:{manner:'Stop'},Fricative:{manner:'Fricative'},Nasal:{manner:'Nasal'},Lateral:{manner:'Lateral'},Rhotic:{manner:'Rhotic'},Glide:{manner:'Glide'}},
    place:{Labial:{place:'Labial'},Coronal:{place:'Coronal'},Dorsal:{place:'Dorsal'},Glottal:{place:'Glottal'},'Labial+Dorsal':{place:'Labial+Dorsal'}},
    laryngeal:{Voiceless:{voicing:'Voiceless'},Voiced:{voicing:'Voiced'}},
    coronal:{Sibilant:{sibilance:'Sibilant'},'Non-sibilant':{sibilance:'Non-sibilant'},Anterior:{anteriority:'Anterior'},Postalveolar:{anteriority:'Postalveolar'}}
  },
  SPE_1968:{
    type:{Consonant:{cons:'+'},Vowel:{syll:'+'},Glide:{is_glide:true}},
    manner:{Stop:{cont:'-',delrel:'-'},Fricative:{cont:'+'},Nasal:{nas:'+'},Lateral:{lat:'+'},Rhotic:{dist:'+'}},
    place:{Labial:{lab:'+'},Coronal:{cor:'+'},Dorsal:{dors:'+'},Glottal:{spr_glot:'+'}},
    laryngeal:{Voiceless:{voice:'-'},Voiced:{voice:'+'}},
    coronal:{Strident:{strid:'+'},'Non-strident':{strid:'-'}}
  }
};

// === State ===
let system='Davenport';let selected=[];let activeConstraints={};

function toggleConstraint(label,constraint){if(activeConstraints[label])delete activeConstraints[label];else activeConstraints[label]=constraint;renderAll();}
function matches(p){const feats=p.features[system]||{};if(system==='Davenport'){if(activeConstraints.Consonant&&p.type!=='consonant')return false;if(activeConstraints.Vowel&&p.type!=='vowel')return false;}for(const c of Object.values(activeConstraints)){for(const[k,v]of Object.entries(c)){if(feats[k]!==v)return false;}}return true;}
function renderFilters(){const f=document.getElementById('filters');f.innerHTML='';for(const[g,chips]of Object.entries(CLASSES[system])){const div=document.createElement('div');div.innerHTML='<b>'+g+'</b><br>';for(const[label,constraint]of Object.entries(chips)){const span=document.createElement('span');span.className='chip';span.textContent=label;if(activeConstraints[label])span.classList.add('active');span.onclick=()=>toggleConstraint(label,constraint);div.appendChild(span);}f.appendChild(div);}}
function renderGrids(){const gc=document.getElementById('gridConsonants');const gv=document.getElementById('gridVowels');gc.innerHTML='';gv.innerHTML='';for(const p of PHONEMES){if(!matches(p))continue;const btn=document.createElement('div');btn.className='tile';btn.textContent=p.ipa;if(selected.includes(p))btn.classList.add('active');btn.onclick=()=>{if(selected.includes(p))selected=selected.filter(x=>x!==p);else selected.push(p);renderDetails();renderGrids();};(p.type==='consonant'?gc:gv).appendChild(b...
function renderDetails(){const el=document.getElementById('detailsContent');if(selected.length===0){el.textContent='Select phonemes';return;}if(selected.length===1){const p=selected[0];el.innerHTML='<b>'+p.ipa+'</b><pre>'+JSON.stringify(p.features[system],null,2)+'</pre>';return;}if(selected.length===2){const[a,b]=selected;const A=a.features[system]||{},B=b.features[system]||{};let shared=[],diff=[];for(const k of new Set([...Object.keys(A),...Object.keys(B)])){if(A[k]===B[k])shared.push([k,A[k]]);else diff...
function renderAll(){renderFilters();renderGrids();renderDetails();}
document.getElementById('toggleSystem').onclick=()=>{system=system==='Davenport'?'SPE_1968':'Davenport';document.getElementById('systemBadge').textContent='System: '+system;renderAll();};
document.getElementById('clearSelectionBtn').onclick=()=>{selected=[];renderAll();};
document.getElementById('resetBtn').onclick=()=>{activeConstraints={};renderAll();};
renderAll();
</script>
</body>
</html>